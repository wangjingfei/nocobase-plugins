# NocoBase 外部数据源插件快速上手指南

## 介绍

NocoBase 外部数据源插件允许您在 NocoBase 中连接和查询外部 MySQL 和 PostgreSQL 数据库。本指南将帮助您快速熟悉插件的基本使用方法。

## 安装插件

1. 在 NocoBase 管理界面，导航到 "设置" > "插件管理"
2. 点击 "添加插件" 按钮
3. 输入插件包名 `@nocobase/plugin-external-datasource`
4. 点击 "安装" 按钮
5. 安装完成后，启用该插件

安装成功后，您将在设置菜单中看到 "外部数据源" 选项。

## 配置数据源

### 添加新的数据源

1. 进入 "设置" > "外部数据源"
2. 点击 "添加数据源" 按钮
3. 填写以下信息：
   - **名称**：为数据源指定一个易于识别的名称
   - **类型**：选择 MySQL 或 PostgreSQL
   - **主机**：数据库服务器地址（如 localhost 或 IP 地址）
   - **端口**：数据库服务端口（MySQL 默认为 3306，PostgreSQL 默认为 5432）
   - **用户名**：数据库用户名
   - **密码**：数据库密码
   - **数据库**：数据库名称
   - **启用**：勾选以立即启用

4. 点击 "测试连接" 按钮验证连接是否成功
5. 点击 "创建" 保存数据源

### 高级选项

展开 "高级选项" 可设置：

- **MySQL**：字符集、时区等
- **PostgreSQL**：架构、SSL 设置等

## 使用 SQL 浏览器

### 打开 SQL 浏览器

1. 在数据源列表页面，点击需要查询的数据源旁边的 "SQL 浏览器" 图标
2. SQL 浏览器界面分为三个主要区域：
   - 左侧：表列表和结构
   - 中间：SQL 查询编辑器
   - 底部：查询结果显示区域

### 浏览数据库表

1. 左侧面板的下拉列表中选择一个表
2. 系统会显示该表的列信息
3. 点击 "查询数据" 按钮可快速生成查询语句

### 执行 SQL 查询

1. 在查询编辑器中输入 SQL 语句，例如：
   ```sql
   SELECT * FROM users LIMIT 10;
   ```
2. 点击 "执行" 按钮运行查询
3. 查询结果将在底部区域以表格形式显示

## 常用查询示例

### 基础查询

```sql
-- 查询表中的所有记录（限制100条）
SELECT * FROM table_name LIMIT 100;

-- 查询特定列
SELECT column1, column2 FROM table_name LIMIT 100;

-- 条件查询
SELECT * FROM table_name WHERE column_name = 'value';
```

### 高级查询

```sql
-- 分组查询
SELECT category, COUNT(*) FROM products GROUP BY category;

-- 联表查询
SELECT a.*, b.name 
FROM table_a a
JOIN table_b b ON a.b_id = b.id;

-- 排序
SELECT * FROM table_name ORDER BY column_name DESC;
```

## 最佳实践

1. **安全性**：使用只读数据库账户，避免意外修改数据
2. **性能**：
   - 总是使用 LIMIT 子句限制结果数量
   - 避免全表扫描的查询
   - 针对频繁查询的条件添加适当的索引
3. **复杂查询**：对于特别复杂的查询，考虑在数据库端创建视图

## 故障排除

### 连接问题

如果无法连接到数据库：
- 确认主机、端口、用户名和密码是否正确
- 检查数据库服务器是否允许远程连接
- 确认网络和防火墙设置允许连接

### 查询问题

- **语法错误**：检查 SQL 语句的语法是否正确
- **权限问题**：确认数据库用户有足够的权限执行查询
- **查询超时**：对于大型查询，考虑添加更多的筛选条件或限制返回的行数

## 下一步

- 探索更多 SQL 查询功能
- 查看完整的使用手册以了解更多高级功能
- 考虑如何将外部数据与 NocoBase 工作流程集成

---

恭喜！您现在已经掌握了 NocoBase 外部数据源插件的基本使用方法。如需更详细的信息，请参阅完整的使用手册。 